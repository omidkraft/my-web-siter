<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø³Ø§ÛŒØª Ú†Ù†Ø¯Ú©Ø§Ø±Ù‡ Ú¯Ø±Ø§ÙÛŒÚ©ÛŒ</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<style>
body { font-family: 'Vazirmatn', sans-serif; margin:0; padding:0; background: linear-gradient(135deg,#6a11cb,#2575fc); color:#fff; }
.wrapper, #mainContent, #purchasePage { display:flex; justify-content:center; align-items:center; flex-direction:column; min-height:100vh; padding-bottom:70px; }
.card, .feature-card, .buy-card { background: rgba(255,255,255,0.12); border-radius:20px; padding:2rem; width:300px; text-align:center; transition:0.3s; backdrop-filter: blur(10px); margin:1rem; box-shadow:0 10px 45px rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.2);}
.card:hover, .feature-card:hover, .buy-card:hover { transform:translateY(-10px) scale(1.03); box-shadow:0 20px 60px rgba(0,0,0,0.35);}
input[type="text"], input[type="password"], input[type="file"], select, textarea, button { width:80%; margin:0.5rem 0; padding:0.5rem; border-radius:15px; border:none; outline:none; font-size:1rem; }
button { background: #ff6b6b; cursor:pointer; color:white; font-weight:bold; transition:0.3s; }
button:hover { background:#ff4757; }
.profile { display:flex; align-items:center; gap:1rem; margin-bottom:2rem; }
.avatar { width:60px; height:60px; border-radius:50%; background:linear-gradient(135deg,#ff6b6b,#feca57); display:flex; justify-content:center; align-items:center; font-size:2rem; color:#fff; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
.username{ font-size:1.3rem; font-weight:bold; }
.usage-display { font-size:0.9rem; color:#ffd700; margin-top:5px; }
.feature-container, .cards-wrapper { display:flex; flex-wrap:wrap; justify-content:center; gap:2rem; }
.output { margin-top:1rem; text-align:center; }
#footerBar{ position:fixed; bottom:0; left:0; width:100%; background:rgba(0,0,0,0.6); display:flex; justify-content:space-around; align-items:center; padding:0.8rem 0; z-index:9999; }
#footerBar button{ background:linear-gradient(135deg,#ff6b6b,#feca57); border-radius:15px; border:none; padding:0.5rem 1rem; color:#fff; font-weight:bold; cursor:pointer; transition:0.3s; }
#footerBar button:hover{ transform:translateY(-3px); box-shadow:0 5px 10px rgba(0,0,0,0.3); }

.buy-card h3 { margin: 10px 0; font-size: 1.4rem; }
.buy-card p { margin: 5px 0; font-size:1rem; }
.buy-card .price { font-size:1.2rem; color:#ffd700; font-weight:bold; margin-bottom:15px; }
.buy-card button { background: linear-gradient(135deg, #ff6b6b, #ffa502); padding:12px 20px; border-radius:15px; color:#fff; font-weight:bold; font-size:1.1rem; cursor:pointer; border:none; width:90%; transition:0.3s; }
.buy-card button:hover { background: linear-gradient(135deg, #ff4757, #ff9f43); transform: scale(1.05);}
.icon { font-size:3rem; margin-bottom:10px; }
.icon.gold { color:#ffd700; }
.icon.silver { color:#ffffff; }
.icon.diamond { color:#7bed9f; }
</style>
</head>
<body>

<!-- Ø«Ø¨Øª Ù†Ø§Ù… -->
<div class="wrapper" id="signupWrapper">
    <div class="card">
        <h2>Ø«Ø¨Øª Ù†Ø§Ù…</h2>
        <input type="text" id="name" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
        <input type="password" id="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
        <button onclick="register()">Ø«Ø¨Øª Ù†Ø§Ù…</button>
    </div>
</div>

<!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
<div id="mainContent" style="display:none;">
    <div class="profile">
        <div class="avatar">ğŸ™‚</div>
        <div>
            <div class="username" id="usernameDisplay"></div>
            <div class="usage-display" id="usageDisplay"></div>
        </div>
    </div>

    <div class="feature-container">
        <div class="feature-card">
            <h3>ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„</h3>
            <input type="file" id="fileInput" multiple>
            <button onclick="useFeature('compress')">ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯</button>
            <div class="output" id="fileOutput"></div>
        </div>

        <div class="feature-card">
            <h3>ØªØ¨Ø¯ÛŒÙ„ ÙØ±Ù…Øª Ø¹Ú©Ø³</h3>
            <input type="file" id="imageInput">
            <select id="formatSelect">
                <option value="image/png">PNG</option>
                <option value="image/jpeg">JPG</option>
                <option value="image/webp">WebP</option>
            </select>
            <button onclick="useFeature('image')">ØªØ¨Ø¯ÛŒÙ„ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯</button>
            <div class="output" id="imageOutput"></div>
        </div>

        <div class="feature-card">
            <h3>ØªØ±Ø¬Ù…Ù‡ Ù…ØªÙ† Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ</h3>
            <textarea id="textInput" rows="4" placeholder="Ø¯Ø± Ø¯Ø³Øª ØªÙˆØ³Ø¹Ù‡"></textarea>
            <button onclick="useFeature('translate')">ØªØ±Ø¬Ù…Ù‡</button>
            <div class="output" id="translateOutput"></div>
        </div>
    </div>
</div>

<!-- ØµÙØ­Ù‡ Ø®Ø±ÛŒØ¯ Ú©Ø§Ø±Øª -->
<div id="purchasePage" style="display:none;">
    <h2>Ø®Ø±ÛŒØ¯ Ú©Ø§Ø±Øª</h2>
    <div class="cards-wrapper">
        <div class="buy-card">
            <div class="icon gold">ğŸ’</div>
            <h3>Ú©Ø§Ø±Øª Û±Û¶Û° ØªØ§ÛŒÛŒ</h3>
            <p>Ø¯Ø³ØªØ±Ø³ÛŒ: 160 Ø¨Ø§Ø±</p>
            <p class="price">300,000 ØªÙˆÙ…Ø§Ù†</p>
            <button onclick="buyCard(160)">Ø®Ø±ÛŒØ¯</button>
        </div>
        <div class="buy-card">
            <div class="icon silver">â­</div>
            <h3>Ú©Ø§Ø±Øª Û²Û° ØªØ§ÛŒÛŒ</h3>
            <p>Ø¯Ø³ØªØ±Ø³ÛŒ: 20 Ø¨Ø§Ø±</p>
            <p class="price">50,000 ØªÙˆÙ…Ø§Ù†</p>
            <button onclick="buyCard(20)">Ø®Ø±ÛŒØ¯</button>
        </div>
        <div class="buy-card">
            <div class="icon diamond">ğŸ”¥</div>
            <h3>Ú©Ø§Ø±Øª Û³Û°Û°Û° ØªØ§ÛŒÛŒ</h3>
            <p>Ø¯Ø³ØªØ±Ø³ÛŒ: 3000 Ø¨Ø§Ø±</p>
            <p class="price">1,000,000 ØªÙˆÙ…Ø§Ù†</p>
            <button onclick="buyCard(3000)">Ø®Ø±ÛŒØ¯</button>
        </div>
    </div>
</div>

<!-- Footer -->
<div id="footerBar">
    <button onclick="showPage('main')">ğŸ  ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</button>
    <button onclick="showPage('purchase')">ğŸ’³ Ø®Ø±ÛŒØ¯</button>
    <button onclick="alert('Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª')">ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
// Ø«Ø¨Øª Ù†Ø§Ù…
function register(){
    const name=document.getElementById('name').value.trim();
    const password=document.getElementById('password').value.trim();
    if(!name||!password){ alert('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!'); return; }
    localStorage.setItem("username", name);
    localStorage.setItem("usageCount", 0);
    localStorage.setItem("usageLimit", 20); // Û²Û° Ø¨Ø§Ø± Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡
    document.getElementById('usernameDisplay').textContent=name;
    updateUsage();
    document.getElementById('signupWrapper').style.display='none';
    document.getElementById('mainContent').style.display='flex';
}

// Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡
function showPage(page){
    if(page==='main'){
        document.getElementById('signupWrapper').style.display='none';
        document.getElementById('mainContent').style.display='flex';
        document.getElementById('purchasePage').style.display='none';
    } else if(page==='purchase'){
        document.getElementById('mainContent').style.display='none';
        document.getElementById('purchasePage').style.display='flex';
    }
}

// Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡
function updateUsage(){
    const count = parseInt(localStorage.getItem('usageCount') || 0);
    const limit = parseInt(localStorage.getItem('usageLimit') || 20);
    document.getElementById('usageDisplay').textContent = `ØªØ¹Ø¯Ø§Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡: ${count} Ø§Ø² ${limit}`;
}

// Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªÙØ§Ø¯Ù‡
function useFeature(feature){
    let usage = parseInt(localStorage.getItem("usageCount") || 0);
    let limit = parseInt(localStorage.getItem("usageLimit") || 20);
    if(usage >= limit){ alert("Ø³Ù‚Ù Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ø´Ø¯. Ù„Ø·ÙØ§ Ú©Ø§Ø±Øª Ø¨Ø®Ø±ÛŒØ¯."); showPage('purchase'); return; }
    localStorage.setItem("usageCount", usage + 1);
    updateUsage();
    if(feature==='compress') compressFile();
    else if(feature==='image') convertImage();
    else if(feature==='translate') translateText();
}

// Ø®Ø±ÛŒØ¯ Ú©Ø§Ø±Øª
function buyCard(amount){
    localStorage.setItem("usageLimit", amount);
    localStorage.setItem("usageCount", 0);
    alert(`Ø®Ø±ÛŒØ¯ Ù…ÙˆÙÙ‚! Ø´Ù…Ø§ Ø§Ú©Ù†ÙˆÙ† ${amount} Ø¨Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯.`);
    updateUsage();
    showPage('main');
}

// ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„
async function compressFile(){
    const files = document.getElementById('fileInput').files;
    if(files.length===0){ alert('Ù„Ø·ÙØ§ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯!'); return; }
    const zip = new JSZip();
    for(let i=0;i<files.length;i++){ zip.file(files[i].name, files[i]); }
    const content = await zip.generateAsync({type:"blob"});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(content);
    link.download = 'compressed_files.zip';
    link.textContent = 'Ø¯Ø§Ù†Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ ÙØ´Ø±Ø¯Ù‡';
    const container=document.getElementById('fileOutput');
    container.innerHTML=''; container.appendChild(link);
}

// ØªØ¨Ø¯ÛŒÙ„ ÙØ±Ù…Øª Ø¹Ú©Ø³
function convertImage(){
    const file = document.getElementById('imageInput').files[0];
    const format = document.getElementById('formatSelect').value;
    if(!file){ alert('Ù„Ø·ÙØ§ ÛŒÚ© Ø¹Ú©Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯!'); return; }
    const reader = new FileReader();
    reader.onload = function(e){
        const img = new Image();
        img.onload = function(){
            const canvas = document.createElement('canvas');
            canvas.width = img.width; canvas.height = img.height;
            const ctx = canvas.getContext('2d'); ctx.drawImage(img,0,0);
            canvas.toBlob(function(blob){
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                const ext = format.split('/')[1];
                link.download = 'converted_image.'+ext;
                link.textContent = 'Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¹Ú©Ø³ ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯Ù‡';
                const container = document.getElementById('imageOutput');
                container.innerHTML=''; container.appendChild(link);
            }, format);
        };
        img.src = e.target.result;
    };
    reader.readAsDataURL(file);
}

// ØªØ±Ø¬Ù…Ù‡ Ù…ØªÙ† (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)
function translateText(){
    const text = document.getElementById('textInput').value.trim();
    if(!text){ alert('Ù„Ø·ÙØ§ Ù…ØªÙ† ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); return; }
    const translated = "ğŸŒ ØªØ±Ø¬Ù…Ù‡ ÙØ§Ø±Ø³ÛŒ: " + text;
    document.getElementById('translateOutput').innerText = translated;
}
</script>
</body>
</html>
